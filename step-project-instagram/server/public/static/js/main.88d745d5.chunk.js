(this["webpackJsonpfront-end-instagram"]=this["webpackJsonpfront-end-instagram"]||[]).push([[0],{182:function(e,t,a){e.exports={loader:"Loader_loader__1jDnt",animate:"Loader_animate__1I6Er",animate2:"Loader_animate2__3JKFQ"}},208:function(e,t,a){e.exports=a(355)},32:function(e){e.exports=JSON.parse('{"apiEndpoint":"http://localhost:4000/api"}')},355:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),i=a(6),s=a(31),l=a(415),u=a(184),m=Object(u.a)({wrapper:{width:"1200px",margin:"0 auto"},overrides:{MuiGridListTileBar:{actionIcon:{width:"100%"}}}}),d=a(391),p=a(393),f=a(395),E=a(75),b=a(396),g=[{name:"Feed",link:"/feed",id:0},{name:"Personal account",link:"/account",id:1}],v=a(10),_=a(32),h=a(54),O=a.n(h);O.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log("Logging the error",e),s.b.error("An unexpected error occurred.")),Promise.reject(e)}));var y={get:O.a.get,post:O.a.post,put:O.a.put,delete:O.a.delete,patch:O.a.patch},x=a(178),N=function(e,t){return function(a){return y.patch("".concat(_.apiEndpoint,"/users"),{active_user:e,action_type:"TOGGLE_SAVED_POSTS",action_payload:t}).then((function(n){if(200!==n.status)return console.error("Nothing was found!");a({type:"TOGGLE_SAVED_POSTS",payload:{action_payload:t,active_user:e}})}))}},k=function(e,t){return function(a){return y.patch("".concat(_.apiEndpoint,"/users"),{active_user:e,action_type:"TOGGLE_SUBSCRIPTION",action_payload:t}).then((function(e){if(200!==e.status)return console.error("Nothing was found!");var t=e.data,n=t.active_user_updated_data,r=t.passive_user_updated_data;a({type:"TOGGLE_SUBSCRIPTION_ACTIVE_USER",payload:{active_user_updated_data:n}}),a({type:"TOGGLE_SUBSCRIBER_PASSIVE_USER",payload:{passive_user_updated_data:r}})}))}},S=Object(d.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var L=function(){var e=S(),t=Object(i.c)(),a=Object(i.d)((function(e){return e.users.activeUser}));return r.a.createElement("div",{className:e.root},r.a.createElement(p.a,{position:"fixed"},r.a.createElement(f.a,null,r.a.createElement(E.a,{variant:"h6",className:e.title},g.map((function(e){return r.a.createElement(b.a,{key:e.id,component:v.b,to:e.link},e.name)}))),localStorage.getItem("token")||null!==a?r.a.createElement(b.a,{color:"inherit",component:v.b,to:"/",onClick:function(){localStorage.removeItem("x-auth-token"),t((function(e){e({type:"LOGOUT_USER",payload:null})}))}},"Logout"):r.a.createElement(b.a,{color:"inherit",component:v.b,to:"/"},"Login"))))},j=a(102),w=a(15),T=function(e,t){return function(a){return y.patch("".concat(_.apiEndpoint,"/users"),{active_user:e,action_type:"TOGGLE_LIKE",action_payload:t}).then((function(n){var r=n.data.likes_counter;if(200!==n.status)return console.error("Nothing was found!");a({type:"TOGGLE_LIKE_USERS",payload:{action_payload:t,active_user:e}}),a({type:"TOGGLE_LIKE_POSTS",payload:{action_payload:t,likes_counter_server:r}})}))}},I=Object(i.b)((function(e){return{activeUser:e.users.activeUser}}),null)((function(e){var t=e.activeUser,a=Object(j.a)(e,["activeUser"]);return t?r.a.createElement(w.b,a):r.a.createElement(w.a,{to:{pathname:"/"}})})),C=a(8),U=a(13);var D=function(e){var t=e.avatar;return r.a.createElement(U.Image,{key:t,cloudName:"dan-insta-step",publicId:t,width:"150",crop:"scale"},r.a.createElement(U.Transformation,{background:"#fafafa",height:"150",width:"150",crop:"fill",radius:"max"}))},R=a(397),P=a(187),G=Object(d.a)((function(e){return{paper:{padding:"20px"},personalHeaderTop:{display:"flex"},personalHeaderMid:{display:"flex",margin:"20px 0px 20px 0px"},textMargin:{margin:"0px 20px 0px 20px"}}}));var A=function(e){var t=G(),a=e.user,n=e.activeUser,o=Object(i.c)();return r.a.createElement(R.a,null,r.a.createElement(P.a,{className:t.paper},r.a.createElement(R.a,{className:t.personalHeaderTop},r.a.createElement(E.a,{variant:"h6",className:t.textMargin},a&&a.username),a._id===n?null:a.subscribers&&!a.subscribers.includes(n)?r.a.createElement(b.a,{onClick:function(){return o(k(n,a._id))},variant:"outlined",color:"primary"},"Subscribe"):r.a.createElement(b.a,{onClick:function(){return o(k(n,a._id))},variant:"outlined",color:"secondary"},"Unsubscribe")),r.a.createElement(R.a,{className:t.personalHeaderMid},r.a.createElement(E.a,{variant:"body2",className:t.textMargin},a.posts&&a.posts.length," posts"),r.a.createElement(E.a,{variant:"body2",className:t.textMargin},a.subscribers&&a.subscribers.length," followers"),r.a.createElement(E.a,{variant:"body2",className:t.textMargin},a.subscriptions&&a.subscriptions.length," following")),r.a.createElement(E.a,{variant:"h6",className:t.textMargin},a&&a.name+" ",a&&a.surname)))},B=a(43),W=a(418),M=a(402),V=a(417),z=a(398),H=a(399),F=a(58),Y=a.n(F),K=a(400),$=a(179),q=a.n($),J=function(e){return function(t){t({type:"TOGGLE_MODAL",payload:e})}},X=Object(d.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginBottom:"40px"},gridList:{width:"100%","& img":{width:"380px"}},card:{"&:hover > div > div":{display:"flex"}},postInfo:{color:"#fff",height:"100%",display:"none",cursor:"pointer"},icons:{display:"flex",justifyContent:"center",alignItems:"center"}}}));function Q(e){var t=X(),a=Object(i.c)(),n=e.posts;return r.a.createElement("div",{className:t.root},r.a.createElement(z.a,{cellHeight:350,className:t.gridList,cols:3},n.map((function(e){return r.a.createElement(H.a,{key:e._id,cols:1,className:t.card},r.a.createElement(U.Image,{publicId:e.pic_url,key:e.pic_url,cloudName:"dan-insta-step"},r.a.createElement(U.Transformation,{width:"350",height:"350",crop:"crop"})),r.a.createElement(K.a,{className:t.postInfo,actionIcon:r.a.createElement("div",{className:t.icons},r.a.createElement(Y.a,{style:{margin:"5px"}}),r.a.createElement(E.a,{style:{margin:"5px"}},e.likes_counter),r.a.createElement(q.a,{style:{margin:"5px"}}),r.a.createElement(E.a,{style:{margin:"5px"}}," ",e.comments.length)),onClick:function(){return a(J(e._id))}}))}))))}var Z=a(401);function ee(e){var t=e.children,a=e.value,n=e.index,o=Object(j.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),a===n&&r.a.createElement(Z.a,null,r.a.createElement(V.a,null,t)))}function te(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var ae=Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:"transparent"},appBar:{background:"transparent",boxShadow:"none"},tabTitle:{color:"#000"}}}));function ne(e){var t=ae(),a=r.a.useState(0),n=Object(B.a)(a,2),o=n[0],c=n[1],s=Object(i.d)((function(e){return e.posts.postsList})),l=e.posts,u=e.user,m=[];u.saved_posts&&u.saved_posts.map((function(e){return s.map((function(t){e===t._id&&m.push(t)}))}));return r.a.createElement("div",{className:t.root},r.a.createElement(p.a,{position:"static",className:t.appBar},r.a.createElement(W.a,{value:o,onChange:function(e,t){c(t)},centered:!0},r.a.createElement(M.a,Object.assign({label:"POSTS"},te(0),{className:t.tabTitle})),r.a.createElement(M.a,Object.assign({label:"SAVED"},te(1),{className:t.tabTitle})))),r.a.createElement(ee,{value:o,index:0},r.a.createElement(Q,{posts:l})),r.a.createElement(ee,{value:o,index:1},m.length>0?r.a.createElement(Q,{posts:m}):"User does not have saved posts"))}var re=Object(d.a)((function(e){return{wrapper:Object(C.a)({},e.wrapper),container:{marginTop:"80px"},personalHeader:{display:"flex",justifyContent:"space-between",width:"50%",margin:"0px auto 40px auto"}}}));var oe=Object(w.h)((function(e){var t=re(),a=Object(i.d)((function(e){return e.users.activeUser})),n=Object(i.d)((function(e){return e.users.usersList})),o=Object(i.d)((function(e){return e.posts.postsList})),c=e.match,s=c.params.id?c.params.id:a,l=c.params.id?c.params.id:a,u=n.filter((function(e){return e._id===s})),m=o.filter((function(e){return e.author_id===l}));return r.a.createElement(R.a,{className:t.wrapper},r.a.createElement(R.a,{className:t.container},r.a.createElement(R.a,{className:t.personalHeader},r.a.createElement(D,{avatar:Object(C.a)({},u[0]).avatar_url}),r.a.createElement(A,{user:Object(C.a)({},u[0]),activeUser:a}))),r.a.createElement(ne,{posts:m,user:Object(C.a)({},u[0])}))})),ce=Object(d.a)((function(e){return{wrapper:Object(C.a)({},e.wrapper),btn:{margin:20},content:{width:"100%",display:"flex",flexDirection:"column",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",alignItems:"center"}}}));var ie=Object(w.h)((function(e){var t=ce(),a=e.history;return r.a.createElement(R.a,{container:!0,spacing:2,className:t.root},r.a.createElement(R.a,{container:!0,spacing:2,className:t.wrapper},r.a.createElement(R.a,{item:!0,xs:12,className:t.content},r.a.createElement(E.a,{variant:"h1"},"404"),r.a.createElement(E.a,{variant:"h6"},"Page not found"),r.a.createElement(b.a,{variant:"contained",color:"primary",className:t.btn,onClick:a.goBack},"Go back"))))})),se=a(130),le=a.n(se),ue=a(180),me=a(420),de=a(404),pe=a(416),fe=a(181),Ee=a.n(fe),be=a(403);function ge(){return r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(be.a,{color:"inherit"},"Our Best Team")," ",(new Date).getFullYear(),".")}var ve=Object(d.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function _e(){var e=Object(w.g)(),t=ve(),a=Object(i.c)(),o=Object(i.d)((function(e){return e.form.error})),c=Object(i.d)((function(e){return e.users.activeUser})),s=Object(n.useRef)(""),l=Object(n.useRef)("");c&&e.push("/feed");var u=function(){var t=Object(ue.a)(le.a.mark((function t(n){var r,o;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=s.current.value,o=l.current.value,y.post("".concat(_.apiEndpoint,"/auth"),{email:r,password:o}).then((function(t){if(200!==t.status)return console.error("Invalid email or password!");var n=t.data.token,r=t.data.id;localStorage.setItem("x-auth-token",n),a({type:"SET_ACTIVE_USER",payload:r}),e.push("/feed")}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{component:"main",maxWidth:"xs"},r.a.createElement(de.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(me.a,{className:t.avatar},r.a.createElement(Ee.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:u},r.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,inputRef:s,error:o}),r.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:l,error:o}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"))),r.a.createElement(V.a,{mt:8},r.a.createElement(ge,null))))}var he=a(407),Oe=a(408),ye=a(409),xe=a(406),Ne=a(411),ke=a(104),Se=a(103),Le=a(98),je=a.n(Le),we=function(e){var t=e.avatarUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.Image,{key:t,cloudName:"dan-insta-step",publicId:t,width:"80",crop:"scale"},r.a.createElement(U.Transformation,{height:"150",width:"150",crop:"fill",radius:"80"})))},Te=a(101),Ie=a.n(Te),Ce=a(100),Ue=a.n(Ce),De=a(99),Re=a.n(De),Pe=Object(d.a)((function(e){return{form:{display:"flex",margin:"0 auto",width:"100%","& > *":{margin:e.spacing(1)}},postcomment:{width:"10%",display:"flex"},placeholder:{width:"90%",display:"flex",resize:"none"}}})),Ge=function(e){var t=e.post,a=e.active_user,o=e.focus,c=Pe(),s=Object(i.c)(),l=Object(n.useRef)(""),u=function(e){e.preventDefault(),s(function(e,t,a){var n=a.text;return function(a){return y.patch("".concat(_.apiEndpoint,"/posts"),{author_id:e,post_id:t,text:n}).then((function(e){if(200!==e.status)return console.error("Nothing was found!");var n=e.data;a({type:"ADD_COMMENT",payload:{post_id:t,updated_post:n}})}))}}(a,t._id,{text:l.current.value})),l.current.value="",console.log(l.current.value)};return o&&l.current.focus(),r.a.createElement("form",{className:c.form,noValidate:!0,autoComplete:"off",onSubmit:u,onKeyUp:function(e){"13"==e.keyCode&&u(e)}},r.a.createElement(pe.a,{placeholder:"Add comment",inputProps:{"aria-label":"description"},className:c.placeholder,inputRef:l,multiline:!0}),r.a.createElement(b.a,{type:"submit",color:"primary",className:c.postcomment},"Post"))},Ae=Object(d.a)((function(e){return{comment:{display:"flex",width:"100%","& > *":{margin:e.spacing(1)}},text:{fontSize:"12px",width:"70%"},username:{width:"106px"},postCommentLink:{textDecoration:"none",color:"#013B8A",fontWeight:"bold"}}})),Be=function(e){var t=e.comment,a=e.allUsers,n=e.modalIsOpen,o=Ae(),c=Object(i.c)(),s=a.find((function(e){return e._id===t.author_id}));return r.a.createElement(xe.a,{className:o.comment},r.a.createElement(v.b,{onClick:function(){n&&c(J())},className:o.postCommentLink,to:"/account/".concat(s._id)},r.a.createElement(E.a,{className:o.username},s.username," ")),r.a.createElement(E.a,{className:o.text},t.text))},We=a(97),Me=a(412),Ve=a(410),ze=Object(d.a)((function(e){return{root:{width:600,marginTop:100},media:{height:100,paddingTop:"56.25%"},bookmark:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},postHeadLink:{textDecoration:"none",color:"#013B8A",fontWeight:"bold"},saveOpen:{transform:"rotate(180deg)"},liketext:{marginLeft:15},showMoreBtn:{fontSize:"10px",marginLeft:"15px",color:"#013B8A"}}})),He=Object(i.b)((function(e){return{allUsers:e.users.usersList,allPosts:e.posts.postsList,active_user:e.users.activeUser}}),null)((function(e){var t=e.postId,a=e.userId,o=e.allUsers,c=e.allPosts,l=e.active_user,u=o.find((function(e){return e._id===a})),m=c.find((function(e){return e._id===t})),d=Object(n.useState)(!1),p=Object(B.a)(d,2),f=p[0],g=p[1],_=ze(),h=Object(i.c)(),O=Object(n.useRef)();Object(We.a)({onSingleClick:function(){h(J(t))},onDoubleClick:function(){if(m.author_id===l)return s.b.info("You can not set likes to your own posts!");h(T(l,t))},ref:O,latency:250});var y,x;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{className:_.root},r.a.createElement(Oe.a,{avatar:r.a.createElement(we,{avatarUrl:u.avatar_url}),className:_.postHeadLink,title:u.username,subheader:m&&m.geolocation,component:v.b,to:"/account/".concat(u._id)}),r.a.createElement(ye.a,{ref:O,title:"Some picture"},r.a.createElement(U.Image,{key:"unique_key",cloudName:"dan-insta-step",publicId:m.pic_url,width:"600",crop:"scale"})),r.a.createElement(Ve.a,null,r.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p"},m&&m.title)),r.a.createElement(xe.a,{disableSpacing:!0,className:_.cardactions},r.a.createElement(Ne.a,{onClick:function(){if(m.author_id===l)return s.b.info("You can not set likes to your own posts!");h(T(l,m._id))},"aria-label":"liked"},(y=l,x=m._id,-1!==o.find((function(e){return e._id===y})).liked_posts.indexOf(x)?r.a.createElement(Y.a,{style:{color:ke.a[500]}}):r.a.createElement(je.a,null))),r.a.createElement(Ne.a,{"aria-label":"comment",onClick:function(){return h(J(m._id))}},r.a.createElement(Re.a,null)),r.a.createElement(Ne.a,{className:_.bookmark,"aria-label":"bookmarked",onClick:function(){return h(N(l,m._id))}},function(e,t){return-1!==o.find((function(t){return t._id===e})).saved_posts.indexOf(t)}(l,m._id)?r.a.createElement(Ue.a,{style:{color:Se.a[800]}}):r.a.createElement(Ie.a,null))),r.a.createElement(xe.a,null,r.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p",className:_.liketext},m.likes_counter," likes")),r.a.createElement(Me.a,null),r.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p",className:_.liketext},m.comments&&m.comments.length>0?"Comments":"No comments yet"),!f&&m.comments[0]?r.a.createElement(Be,{comment:m.comments&&m.comments[0],allUsers:o}):null,!f&&m.comments[1]?r.a.createElement(b.a,{className:_.showMoreBtn,onClick:function(){g(!f)},variant:"outlined"},"show more"):null,f?m.comments&&m.comments.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,{comment:e,allUsers:o}),r.a.createElement(Me.a,null))})):null,r.a.createElement(Ge,{post:m,active_user:l})))})),Fe=Object(d.a)((function(e){return{root:{display:"flex",alignItems:"center",flexDirection:"column"}}})),Ye=Object(i.b)((function(e){return{allPosts:e.posts.postsList,uploadedPosts:e.posts.uploadedPostsList,users:e.users.usersList,active_user:e.users.activeUser,after:e.posts.after,more:e.posts.more,loading:e.posts.loading}}),null)((function(e){var t=Object(i.c)(),a=e.allPosts,o=e.uploadedPosts,c=e.users,s=e.after,l=e.more,u=e.loading,m=(e.active_user,Fe()),d=function(){t({type:"LOADING_POSTS"});var e=a.slice(s,s+3);t({type:"NEW_POSTS_LOADED",newData:e})},p=r.a.useRef(d),f=r.a.useRef(new IntersectionObserver((function(e){e[0].isIntersecting&&p.current()}),{threshold:1,rootMargin:"50px"})),E=r.a.useState(null),b=Object(B.a)(E,2),g=b[0],v=b[1];Object(n.useEffect)((function(){p.current=d}),[d]),Object(n.useEffect)((function(){var e=g,t=f.current;return e&&t.observe(e),function(){e&&t.unobserve(e)}}),[g]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:m.root},o.map((function(e){return r.a.createElement(He,{postId:e._id,userId:(t=e.author_id,c.filter((function(e){return e._id===t}))[0]._id),key:e._id});var t}))),u&&r.a.createElement("p",null,"Loading..."),!u&&l&&r.a.createElement("p",{ref:v,style:{background:"transparent"}}))})),Ke=a(405),$e=a(413),qe=Object(d.a)((function(e){return{root:{display:"flex",marginTop:10,marginLeft:10},username:{marginLeft:10,marginTop:5,fontWeight:"bold"},name:{marginLeft:10,marginTop:5,color:"grey"},inheritance:{color:"grey",marginLeft:10,marginTop:5},button:{"& > *":{margin:e.spacing(1)},marginLeft:"auto",marginRight:40},postHeadLink:{textDecoration:"none",color:"#013B8A"}}}));var Je=function(e){var t=e.subscription,a=e.users,n=e.index,o=(e.active_user,a.filter((function(e){return e._id===t}))[0]),c=qe();return r.a.createElement("div",{className:c.root},r.a.createElement(v.b,{to:"/account/".concat(t)},r.a.createElement(U.Image,{key:n,cloudName:"dan-insta-step",publicId:o.avatar_url,width:"50",crop:"scale"},r.a.createElement(U.Transformation,{height:"150",width:"150",crop:"fill",radius:"max"}))),r.a.createElement("div",null,r.a.createElement("div",{className:c.username},r.a.createElement(v.b,{to:"/account/".concat(t),className:c.postHeadLink},o&&o.username)),r.a.createElement("div",{className:c.name},o&&o.name+" ",o&&o.surname)))},Xe=Object(d.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},pos:{display:"inline-block",marginLeft:10,fontWeight:"bold"},all:{display:"inline-block",marginRight:12,fontWeight:700,textDecoration:"none",color:"#000",fontSize:16},header:{marginTop:20,display:"flex",justifyContent:"space-between"},name:{marginRight:5,color:"grey",fontSize:16},username:{fontWeight:700},surname:{color:"grey",fontSize:16},wrapper:{display:"flex",marginTop:-10},userwrapper:{marginLeft:10,marginTop:10},avatar:{width:50,height:50},list:{width:500,height:200,overflow:"auto"},postHeadLink:{textDecoration:"none",color:"#013B8A"}}}));var Qe=function(e){var t=e.users,a=e.active_user,n=t.filter((function(e){return e._id===a}))[0],o=n.subscriptions.filter((function(e){return e!==a})),c=Xe();return r.a.createElement("div",null,r.a.createElement(v.b,{to:"/account/".concat(a)},r.a.createElement(U.Image,{key:a,cloudName:"dan-insta-step",publicId:n&&n.avatar_url,width:"80",crop:"fill"},r.a.createElement(U.Transformation,{background:"#fafafa",height:"150",width:"150",crop:"fill",radius:"max"}))),r.a.createElement("div",{className:c.userwrapper},r.a.createElement("div",{className:c.username},r.a.createElement(v.b,{className:c.postHeadLink,to:"/account/".concat(a)},n&&n.username)),r.a.createElement("span",{className:c.name},n&&n.name),r.a.createElement("span",{className:c.surname},n&&n.surname)),r.a.createElement(he.a,null,r.a.createElement("div",{className:c.wrapper},r.a.createElement(Ke.a,{className:c.root},r.a.createElement("div",{className:c.header},r.a.createElement(E.a,{className:c.pos,color:"textSecondary",gutterBottom:!0},"Subscriptions"),r.a.createElement(v.b,{to:"/subscribers",className:c.all,activeClassName:"active"},"Show All")),r.a.createElement($e.a,null,r.a.createElement("div",{className:c.root},r.a.createElement("div",{className:c.list},n&&o.length>0?n&&o.map((function(e,n){return r.a.createElement(Je,{key:n,subscription:e,users:t,active_user:a})})):r.a.createElement("div",null,"Oooops! You aren't subscribed to anyone :("))))))))},Ze=Object(d.a)((function(e){return{root:{display:"flex",marginTop:10,marginLeft:10},username:{fontWeight:"bold",marginLeft:10,marginTop:5,textDecoration:"none"},inheritance:{color:"grey",marginLeft:10,marginTop:5},button:{"& > *":{margin:e.spacing(1)},marginLeft:"auto",marginRight:20},postHeadLink:{textDecoration:"none",color:"#013B8A"}}}));var et=function(e){var t=e.subscriber,a=e.active_user,n=e.index,o=e.activeUser,c=Object(i.c)(),s=Ze();return r.a.createElement("div",{className:s.root},r.a.createElement(v.b,{to:"/account/".concat(t._id)},r.a.createElement(U.Image,{key:n,cloudName:"dan-insta-step",publicId:t.avatar_url,width:"50",crop:"scale"},r.a.createElement(U.Transformation,{height:"150",width:"150",crop:"fill",radius:"max"}))),r.a.createElement("div",null,r.a.createElement("div",{className:s.username},r.a.createElement(v.b,{to:"/account/".concat(t._id),className:s.postHeadLink},t&&t.username)),r.a.createElement("div",{className:s.inheritance},o.subscribers.includes(t._id)?"Your subscriber":null)),r.a.createElement("div",{className:s.button},r.a.createElement(b.a,{onClick:function(){return c(k(a,t._id))},color:"primary"},"Subscribe")))},tt=Object(d.a)((function(e){return{root:{width:"100%",marginTop:20,backgroundColor:e.palette.background.paper,zIndex:5},pos:{display:"inline-block",marginBottom:15,fontWeight:"bold",fontSize:16},all:{display:"inline-block",marginRight:0,fontWeight:700,fontSize:16,textDecoration:"none",color:"#000"},header:{display:"flex",justifyContent:"space-between",marginTop:-5},userwrapper:{marginLeft:10,marginTop:10},avatar:{width:50,height:50}}}));var at=function(e){var t=e.users,a=e.active_user,n=t.filter((function(e){return e._id===a}))[0],o=t.filter((function(e){return e._id!==a})).filter((function(e){return!n.subscriptions.includes(e._id)})).slice(0,3),c=tt();return r.a.createElement(he.a,{className:c.root},r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{dense:!0,className:c.main},r.a.createElement("div",{className:c.header},r.a.createElement(E.a,{className:c.pos,color:"textSecondary"},"People you may know"),r.a.createElement(v.b,{to:"/users",className:c.all,activeClassName:"active"},"Show All")),r.a.createElement("div",{className:c.subwrap},o.length>0?o.map((function(e,t){return r.a.createElement(et,{key:e._id,active_user:a,activeUser:n,subscriber:e,index:t})})):r.a.createElement("div",null,"Oooops! There are no recommendations for you :(")))))},nt=Object(d.a)((function(e){return{wrapper:Object(C.a)({},e.wrapper),rightBlock:{position:"fixed",height:"50vh",right:50,top:115,width:"30%"},leftBlock:{width:"70%"}}}));var rt=Object(i.b)((function(e){return{posts:e.posts.postsList,users:e.users.usersList,active_user:e.users.activeUser}}),null)((function(e){var t=e.users,a=e.active_user,n=nt();return r.a.createElement(R.a,{container:!0},r.a.createElement(R.a,{item:!0,className:n.leftBlock},r.a.createElement(Ye,null)),r.a.createElement(R.a,{item:!0,xs:6,className:n.rightBlock},r.a.createElement(Qe,{users:t,active_user:a}),r.a.createElement(at,{users:t,active_user:a})))})),ot=Object(d.a)((function(e){return{root:{display:"flex",marginTop:10,marginLeft:10},username:{marginLeft:10,marginTop:5,fontWeight:"bold"},name:{marginLeft:10,marginTop:5,color:"grey"},inheritance:{color:"grey",marginLeft:10,marginTop:5},button:{"& > *":{margin:e.spacing(1)},marginLeft:"auto",marginRight:40},link:{textDecoration:"none",fontSize:16}}}));var ct=function(e){var t=e.subscriber,a=e.activeUser,n=e.index,o=e.active_user,c=Object(i.c)(),s=ot();return r.a.createElement("div",{className:s.root},r.a.createElement(v.b,{to:"/account/".concat(t._id)},r.a.createElement(U.Image,{key:n,cloudName:"dan-insta-step",publicId:t.avatar_url,width:"80",crop:"scale"},r.a.createElement(U.Transformation,{height:"150",width:"150",crop:"fill",radius:"max"}))),r.a.createElement("div",null,r.a.createElement("div",{className:s.username},r.a.createElement(v.b,{className:s.link,to:"/account/".concat(t._id)},t&&t.username)),r.a.createElement("div",{className:s.name},t&&t.name," ",t&&t.surname),r.a.createElement("div",{className:s.inheritance},a.subscribers.includes(t._id)?"Your subscriber":null)),r.a.createElement("div",{className:s.button},r.a.createElement(b.a,{onClick:function(){return c(k(o,t._id))},color:"primary"},"Subscribe")))},it=Object(d.a)((function(e){return{root:{width:960,marginLeft:"auto",marginRight:"auto",backgroundColor:e.palette.background.paper,zIndex:5,marginTop:10},header:{display:"flex",justifyContent:"center",fontWeight:"bold",fontSize:18},wrapper:{marginTop:80}}}));var st=Object(i.b)((function(e){return{users:e.users.usersList,active_user:e.users.activeUser}}))((function(e){var t=e.users,a=e.active_user,n=t.filter((function(e){return e._id===a}))[0],o=t.filter((function(e){return e._id!==a})).filter((function(e){return!n.subscriptions.includes(e._id)})),c=it();return r.a.createElement("div",{className:c.wrapper},r.a.createElement("div",{className:c.header},"Your Recommendations"),r.a.createElement(he.a,{className:c.root},r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{dense:!0,className:c.root},r.a.createElement("div",null,o.length>0?o.map((function(e,t){return r.a.createElement(ct,{key:e._id,active_user:a,activeUser:n,subscriber:e,index:t})})):r.a.createElement("div",null,"Oooops! There are no recommendations for you :("))))))})),lt=Object(d.a)((function(e){return{root:{display:"flex",marginTop:10,marginLeft:10},username:{marginLeft:10,marginTop:20,fontWeight:"bold",fontSize:16},name:{marginLeft:10,marginTop:10,color:"grey",fontSize:16},inheritance:{color:"grey",marginLeft:10,marginTop:5},button:{"& > *":{margin:e.spacing(1)},marginLeft:"auto",marginRight:40},link:{textDecoration:"none",fontSize:16}}}));var ut=function(e){var t=e.subscription,a=e.active_user,n=e.users,o=e.index,c=n.filter((function(e){return e._id===t}))[0],s=Object(i.c)(),l=lt();return r.a.createElement("div",{className:l.root},r.a.createElement(v.b,{to:"/account/".concat(t)},r.a.createElement(U.Image,{key:o,cloudName:"dan-insta-step",publicId:c.avatar_url,width:"80",crop:"scale"},r.a.createElement(U.Transformation,{height:"150",width:"150",crop:"fill",radius:"max"}))),r.a.createElement("div",null,r.a.createElement("div",{className:l.username},r.a.createElement(v.b,{className:l.link,to:"/account/".concat(t)},c&&c.username)),r.a.createElement("div",{className:l.name},c&&c.name+" ",c&&c.surname)),r.a.createElement("div",{className:l.button},r.a.createElement(b.a,{onClick:function(){return s(k(a,t))},variant:"outlined",color:"secondary"},"Unsubscribe")))},mt=Object(d.a)((function(e){return{root:{width:960,marginLeft:"auto",marginRight:"auto",backgroundColor:e.palette.background.paper,zIndex:5,marginTop:10},header:{marginTop:20,display:"flex",justifyContent:"center",fontWeight:"bold",fontSize:18},wrapper:{marginTop:80}}}));var dt=Object(i.b)((function(e){return{users:e.users.usersList,active_user:e.users.activeUser}}))((function(e){var t=e.users,a=e.active_user,n=t.filter((function(e){return e._id===a}))[0].subscriptions.filter((function(e){return e!==a})),o=mt();return r.a.createElement("div",{className:o.wrapper},r.a.createElement("div",{className:o.header},"Your Subscriptions"),r.a.createElement(he.a,{className:o.root},r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{dense:!0,className:o.root},r.a.createElement("div",null,n&&n.length>0?n&&n.map((function(e){return r.a.createElement(ut,{key:e,active_user:a,subscription:e,users:t})})):r.a.createElement("div",null,"Oooops! You aren't subscribed to anyone :( "))))))})),pt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/",render:function(){return r.a.createElement(_e,null)}}),r.a.createElement(I,{exact:!0,path:"/feed",render:function(){return r.a.createElement(rt,null)}}),r.a.createElement(I,{exact:!0,path:"/account",render:function(){return r.a.createElement(oe,null)}}),r.a.createElement(I,{exact:!0,path:"/account/:id/",render:function(){return r.a.createElement(oe,null)}}),r.a.createElement(I,{exact:!0,path:"/users",render:function(){return r.a.createElement(st,null)}}),r.a.createElement(I,{exact:!0,path:"/subscribers",render:function(){return r.a.createElement(dt,null)}}),r.a.createElement(I,{exact:!0,path:"*",render:function(){return r.a.createElement(ie,null)}})))},ft=a(182),Et=a.n(ft),bt=function(){return r.a.createElement("div",{className:Et.a.loader})},gt=a(419),vt=a(414),_t=a(357),ht=Object(d.a)((function(e){return{card:{width:550,boxShadow:"unset"},bookmark:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},postHeadLink:{textDecoration:"none",color:"black"},saveOpen:{transform:"rotate(180deg)"},grid:{display:"flex"},post:{width:"600px"},info:{width:"500px"}}})),Ot=Object(i.b)((function(e){return{allUsers:e.users.usersList,modalIsOpen:e.modal.modalIsOpen,active_user:e.users.activeUser}}),null)((function(e){var t=Object(n.useState)(!1),a=Object(B.a)(t,2),o=a[0],c=a[1],l=e.post,u=e.user,m=e.allUsers,d=e.modalIsOpen,p=e.active_user,f=ht(),b=Object(i.c)(),g=Object(n.useRef)();Object(We.a)({onSingleClick:function(){return b(J(l._id))},onDoubleClick:function(){if(l.author_id===p)return s.b.info("You can not set likes to your own posts!");b(T(p,l._id))},ref:g,latency:250});var _,h;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:f.grid},r.a.createElement("div",{className:f.post},r.a.createElement(he.a,{className:f.card},r.a.createElement(ye.a,{ref:g,title:"Some picture",style:{width:"600px"}},r.a.createElement(U.Image,{key:"unique_key",cloudName:"dan-insta-step",publicId:l.pic_url,width:"600",crop:"scale"})))),r.a.createElement("div",{className:f.info},r.a.createElement(Oe.a,{avatar:r.a.createElement(we,{avatarUrl:u.avatar_url}),title:u.username,subheader:l&&l.geolocation,component:v.b,to:"/account/".concat(u._id),className:f.postHeadLink,onClick:function(){d&&b(J())}}),r.a.createElement(Ve.a,null,r.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p"},l&&l.title)),r.a.createElement(xe.a,{disableSpacing:!0,className:f.cardactions},r.a.createElement(Ne.a,{onClick:function(){if(l.author_id===p)return s.b.info("You can not set likes to your own posts!");b(T(p,l._id))},"aria-label":"liked"},(_=p,h=l._id,-1!==m.find((function(e){return e._id===_})).liked_posts.indexOf(h)?r.a.createElement(Y.a,{style:{color:ke.a[500]}}):r.a.createElement(je.a,null))),r.a.createElement(Ne.a,{"aria-label":"comment"},r.a.createElement(Re.a,{onClick:function(){c(!o)}})),r.a.createElement(Ne.a,{className:f.bookmark,"aria-label":"bookmarked",onClick:function(){return b(N(p,l._id))}},function(e,t){return-1!==m.find((function(t){return t._id===e})).saved_posts.indexOf(t)}(p,l._id)?r.a.createElement(Ue.a,{style:{color:Se.a[800]}}):r.a.createElement(Ie.a,null))),r.a.createElement(xe.a,null,r.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p"},l.likes_counter," likes")),r.a.createElement(Me.a,null),r.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p",className:f.liketext},l.comments&&l.comments.length>0?"Comments":"No comments yet"),l.comments.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,null),r.a.createElement(Be,{comment:e,allUsers:m,modalIsOpen:d}))})),r.a.createElement(Ge,{post:l,active_user:p,focus:o}))))})),yt=Object(d.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),xt=Object(i.b)((function(e){return{users:e.users.usersList,posts:e.posts.postsList,modalIsOpen:e.modal.modalIsOpen,activePostId:e.modal.activePostId}}),null)((function(e){var t=yt(),a=e.modalIsOpen,n=e.activePostId,o=e.users,c=e.posts.find((function(e){return e._id===n})),s=c.author_id,l=o.find((function(e){return e._id===s})),u=Object(i.c)();return r.a.createElement("div",null,r.a.createElement(gt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:a,onClose:function(){return u(J())},closeAfterTransition:!0,BackdropComponent:vt.a,BackdropProps:{timeout:500}},r.a.createElement(_t.a,{in:a},r.a.createElement("div",{className:t.paper},r.a.createElement(Ot,{post:c,user:l})))))}));a(354);var Nt=Object(i.b)((function(e){return{modalIsOpen:e.modal.modalIsOpen,loadingUsers:e.users.loading,loadingPosts:e.posts.loading}}),(function(e){return{getUsers:function(){return e((function(e){return e({type:"LOADING_USERS",payload:!0}),y.get("".concat(_.apiEndpoint,"/users")).then((function(e){return e.data})).then((function(t){e({type:"SAVE_USERS",payload:t}),e({type:"LOADING_USERS",payload:!1})}))}))},getPosts:function(){return e((function(e){e({type:"LOADING_POSTS",payload:!0});var t=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}return e};return y.get("".concat(_.apiEndpoint,"/posts")).then((function(e){return e.data})).then((function(a){e({type:"SAVE_POSTS",payload:t(a)}),e({type:"LOADING_POSTS",payload:!1})}))}))},setCurrentUser:function(){return e((function(e){var t=localStorage.getItem("x-auth-token");e({type:"SET_ACTIVE_USER",payload:Object(x.a)(t)._id})}))}}}))((function(e){var t=e.getUsers,a=e.getPosts,o=e.loadingUsers,c=e.loadingPosts,i=e.modalIsOpen,u=e.setCurrentUser;return Object(n.useEffect)((function(){t(),a();try{u()}catch(e){}}),[t,a,u]),o||c?r.a.createElement(bt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null),r.a.createElement(l.a,{theme:m},i?r.a.createElement(xt,null):null,r.a.createElement(L,null),r.a.createElement(pt,null)))})),kt=a(45),St=a(49),Lt=a.n(St),jt={loading:!1,usersList:[],activeUser:""},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_USERS":return Object(C.a)(Object(C.a)({},e),{},{loading:t.payload});case"SAVE_USERS":return Object(C.a)(Object(C.a)({},e),{},{usersList:t.payload});case"TOGGLE_LIKE_USERS":var a=t.payload,n=a.action_payload,r=a.active_user,o=e.usersList.find((function(e){return e._id===r})),c=Object(C.a)({},o);if(-1===o.liked_posts.indexOf(n))c.liked_posts.push(n);else{var i=o.liked_posts.indexOf(n);c.liked_posts.splice(i,1)}var s=e.usersList.indexOf(o);return Lt()(e,{usersList:{$splice:[[s,1,c]]}});case"TOGGLE_SAVED_POSTS":var l=t.payload,u=l.action_payload,m=l.active_user,d=e.usersList.find((function(e){return e._id===m})),p=Object(C.a)({},d);if(-1===d.saved_posts.indexOf(u))p.saved_posts.push(u);else{var f=d.saved_posts.indexOf(u);p.saved_posts.splice(f,1)}var E=e.usersList.indexOf(d);return Lt()(e,{usersList:{$splice:[[E,1,p]]}});case"TOGGLE_SUBSCRIPTION_ACTIVE_USER":var b=t.payload.active_user_updated_data,g=b.user_id,v=e.usersList.find((function(e){return e._id===g})),_=Object(C.a)({},v);_.subscriptions=b.subscriptions;var h=e.usersList.indexOf(v);return Lt()(e,{usersList:{$splice:[[h,1,_]]}});case"TOGGLE_SUBSCRIBER_PASSIVE_USER":var O=t.payload.passive_user_updated_data,y=O.user_id,x=e.usersList.find((function(e){return e._id===y})),N=Object(C.a)({},x);N.subscribers=O.subscribers;var k=e.usersList.indexOf(x);return Lt()(e,{usersList:{$splice:[[k,1,N]]}});case"SET_ACTIVE_USER":case"LOGOUT_USER":return Object(C.a)(Object(C.a)({},e),{},{activeUser:t.payload});default:return e}},Tt=a(131),It={loading:!1,postsList:[],uploadedPostsList:[],more:!0,after:0},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_POSTS":return Object(C.a)(Object(C.a)({},e),{},{loading:t.payload});case"SAVE_POSTS":return Object(C.a)(Object(C.a)({},e),{},{postsList:t.payload});case"TOGGLE_LIKE_POSTS":var a=t.payload,n=a.action_payload,r=a.likes_counter_server,o=e.postsList.find((function(e){return e._id===n})),c=e.postsList.indexOf(o),i=Object(C.a)(Object(C.a)({},o),{},{likes_counter:r});return Lt()(e,{postsList:{$splice:[[c,1,i]]}});case"ADD_COMMENT":var s=t.payload,l=s.post_id,u=s.updated_post,m=e.postsList.find((function(e){return e._id===l})),d=e.postsList.indexOf(m);return Lt()(e,{postsList:{$splice:[[d,1,u]]}});case"NEW_POSTS_LOADED":return Object(C.a)(Object(C.a)({},e),{},{loading:!1,uploadedPostsList:[].concat(Object(Tt.a)(e.uploadedPostsList),Object(Tt.a)(t.newData)),more:3===t.newData.length,after:e.after+t.newData.length});default:return e}},Ut={modalIsOpen:!1,activePostId:null},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0,a=t.payload?t.payload:null;switch(t.type){case"TOGGLE_MODAL":return Object(C.a)(Object(C.a)({},e),{},{modalIsOpen:!e.modalIsOpen,activePostId:a});default:return e}},Rt={error:!1},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WRONG_DATA":case"CORRECT_DATA":return Object(C.a)(Object(C.a)({},e),{},{error:t.payload});default:return e}},Gt=Object(kt.c)({users:wt,posts:Ct,modal:Dt,form:Pt}),At=a(183),Bt=window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e},Wt=Object(kt.e)(Gt,Object(kt.d)(Object(kt.a)(At.a),Bt));c.a.render(r.a.createElement(i.a,{store:Wt},r.a.createElement(v.a,null,r.a.createElement(de.a,null,r.a.createElement(Nt,null)))),document.getElementById("root"))}},[[208,1,2]]]);
//# sourceMappingURL=main.88d745d5.chunk.js.map